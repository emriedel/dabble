# Dabble - Daily Word Puzzle Game

## Project Overview

Dabble is a daily Scrabble-style word puzzle game where players receive a randomly-generated board with unique shapes and bonus squares, along with a set of letters. The goal is to score the highest possible Scrabble score using valid words.

**Purpose:** Provide a quick, engaging daily word game experience similar to Wordle/Connections
**Development Strategy:** Mobile-first web app, stateless (no login required)
**Current Status:** Initial implementation

## Game Rules and Mechanics

### Core Gameplay
1. Each day, all players receive the same puzzle (board + letters)
2. Players place tiles from their rack onto the board to form words
3. Words must connect like traditional Scrabble:
   - First word must cover the center star (★)
   - Subsequent words must connect to existing words
4. Only valid Scrabble dictionary words are accepted
5. Goal: Maximize your total score

### Board Features
- 9x9 grid (configurable in `src/constants/gameConfig.ts`)
- Dead spaces (dark cells where tiles cannot be placed)
- Bonus squares:
  - DL (Double Letter) - blue
  - TL (Triple Letter) - dark blue
  - DW (Double Word) - pink/rose
  - TW (Triple Word) - orange
  - ★ (Start) - amber, acts as Double Word

### Letter Rack
- Players receive 12 letters per puzzle (configurable)
- Letter distribution weighted by Scrabble frequencies
- Minimum 3 vowels guaranteed

### Scoring System
- Standard Scrabble letter point values (A=1, B=3, Q=10, etc.)
- Bonus squares multiply letter or word scores
- Bonuses only apply to newly placed tiles

## Core Technology Stack

- **Frontend**: Next.js 14 with TypeScript and Tailwind CSS
- **Backend**: Stateless (puzzle generated client-side from date seed)
- **Dictionary**: Enable word list (~173k words) in `/public/dict/words.txt`
- **Testing**: Vitest (unit)
- **Deployment**: Vercel

## Development Guidelines

### Code Standards
- Use TypeScript for type safety
- Functional components with hooks
- Mobile-first responsive design
- Dark theme by default

### File Structure
```
src/
├── app/                 # Next.js app directory
│   ├── layout.tsx       # Root layout with metadata
│   ├── page.tsx         # Main game page
│   └── globals.css      # Global styles
├── components/          # React components
│   ├── Game.tsx         # Main game orchestrator
│   ├── GameBoard.tsx    # Board grid component
│   ├── LetterRack.tsx   # Letter rack component
│   ├── Tile.tsx         # Individual tile components
│   ├── WordList.tsx     # Submitted words display
│   └── ShareModal.tsx   # Share results modal
├── lib/                 # Core logic
│   ├── puzzleGenerator.ts  # Daily puzzle generation
│   ├── gameLogic.ts        # Word validation, scoring
│   └── dictionary.ts       # Word dictionary (Trie)
├── types/               # TypeScript types
│   └── index.ts
├── constants/           # Configuration
│   └── gameConfig.ts    # Board size, letter values, etc.
└── hooks/               # Custom React hooks (as needed)
```

### Key Configuration (src/constants/gameConfig.ts)
- `BOARD_SIZE`: Grid dimensions (default: 9)
- `PUZZLE_LETTER_COUNT`: Letters given to player (default: 12)
- `MIN_VOWELS`: Minimum vowels guaranteed (default: 3)
- `LETTER_POINTS`: Standard Scrabble letter values
- `LETTER_DISTRIBUTION`: Letter frequency in pool
- `BOARD_CONFIG`: Dead space and bonus square counts

## Important Commands

### Development
- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm start` - Run production build locally
- `npm run lint` - Run ESLint
- `npm run type-check` - TypeScript type checking

### Testing
- `npm test` - Run unit tests (Vitest)

## Game-Specific Implementation Notes

### Puzzle Generation
- Uses `seedrandom` library for deterministic random generation
- Seed is based on the date string (YYYY-MM-DD)
- Same date = same puzzle for all players worldwide
- Board shape generated by "growing" dead spaces from corners/edges
- Connectivity ensured via BFS from center

### Dictionary
- Uses Trie data structure for O(k) word lookup
- Loaded asynchronously on game start
- Words must be 2+ letters

### Word Validation Flow
1. Check tiles form a line (horizontal or vertical)
2. Check placement is contiguous (no gaps, except filled by existing letters)
3. Check connection to existing words (or center star for first word)
4. Extract all formed words (main word + cross words)
5. Validate each word against dictionary
6. Calculate score with bonuses

### Sharing
- Emoji-based share format (like Wordle)
- Score bar visualization
- Native share API on mobile, clipboard fallback on desktop

## Current Status Summary

**Fully Working:**
- Daily puzzle generation (seeded randomization)
- Board rendering with dead spaces and bonuses
- Letter rack with selection
- Tile placement on board
- Word validation against dictionary
- Scoring with bonus multipliers
- Cross-word detection
- Share modal with results

**In Progress:**
- Testing and polish
- Documentation

**Next Steps:**
- Add keyboard support for desktop
- Add undo/redo functionality
- Visual feedback for invalid placements
- Animations for tile placement
- Sound effects (optional)

**Future Enhancements:**
- Statistics tracking (localStorage)
- Streak tracking
- Difficulty variants
- Tutorial/how-to-play modal
